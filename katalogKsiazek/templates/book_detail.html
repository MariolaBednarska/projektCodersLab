{% extends 'base.html' %}

{% block content %}
    <h1>{{ book.title }} by {{ book.author }}</h1>
    <p>Year: {{ book.publication_year }}</p>
    <p>Bookshelf: {{ book.get_bookshelf_display }}</p>

    <h2>Status</h2>
    <p>{{ book.bookstatus_set.last.status }}</p>
    <form method="post" action="{% url 'edit_book_status' book.id %}">
        {% csrf_token %}
        {{ status_form.as_p }}
        <button type="submit">Edit Status</button>
    </form>

    <h2>Rating</h2>
    {% if book.rating %}
        <p>Current rating: {{ book.rating.get_rate_display }}</p>
    {% else %}
        <p>No rating yet.</p>
    {% endif %}
    <form method="post" action="{% url 'edit_book_rating' book.id %}">
        {% csrf_token %}
        {{ rating_form.as_p }}
        <button type="submit">Save Rating</button>
    </form>

    <h2>Categories</h2>
    <ul>
        {% for category in categories %}
        <li>{{ category.name }}: {{ category.description }}</li>
        {% endfor %}
    </ul>

    <a href="{% url 'bookshelf' %}">Back to bookshelf</a>
{% endblock %}

